.article--postalicious,
.collection_item { // For cross-posts.
  --post-max-width: 100%;
  --post-max-width-text: 100%;

  @include breakpoint(sm) {
    --post-max-width: 45rem; // 900px
    --post-max-width-text: 30rem;
  }
}

.article--postalicious {
  // Allow post sections to use the entire width.
  .cu-section {
    --cu-max-width-section: 100%;
  }

  .cu-x-block:not(.block-system-breadcrumb-block) {
    width: 100%; // Allow field content, like published date, to take up full width.
    max-width: var(--post-max-width);
    margin: 0 auto;
  }

  @include breakpoint(sm) {
    // The extra `.block` class is to match the specificity with the rule above.
    .cu-x-block.block.block-better-social-sharing-buttons {
      // Remove the bottom flex row gap for sharing buttons. This is done because
      // the social sharing buttons are absolutely positioned and thus the zero
      // height block has a row gap on the top and bottom. See _social-share.scss
      margin-bottom: calc(var(--cu-vr1) * -1);
    }
  }

  .cu-heading.field--title {
    --cu-font-size: var(--cu-ms6);
    --cu-font-weight: 400;
  }

  .field--field-published-date {
    --cu-font-size: var(--cu-ms-2);
    --cu-text-color: #6C6C6C;
  }

  .cu-component--rich-text {
    blockquote {
      font-size: var(--cu-ms3);
      font-weight: 600;
      line-height: 1.3;
      font-family: "freight-text-pro", serif;
      text-align: center;
      margin: var(--cu-vr1) var(--cu-ps1);

      @include breakpoint(md) {
        font-size: var(--cu-ms5);
        margin: var(--cu-vr2) calc(var(--post-max-width-text) / 4 * -1);
        clear: both;
      }

      p + p:last-of-type {
        font-family: Replica;
        text-transform: uppercase;
        font-size: var(--cu-ms-3);
        color: #6C6C6C;
        font-weight: 400;
        letter-spacing: 0.1em;
      }
    }

    @include breakpoint(md) {
      .cu-media.align-center {
        margin-right: calc(var(--post-max-width-text) / 4 * -1);
        margin-left: calc(var(--post-max-width-text) / 4 * -1);
      }

      .cu-media.align-right {
        margin-right: calc(var(--post-max-width-text) / 4 * -1);
      }

      .cu-media.align-left {
        margin-left: calc(var(--post-max-width-text) / 4 * -1);
      }
    }
  }

  // Add a partial border to un-floated inline images. Note that image
  // paragraphs (e.g. .paragraph--type--image) should arguably use this
  // treatment, too, but the border could conflict with image effects (curtain,
  // ken burns) allowed on image paragraphs.
  .cu-media.align-center .field--field-media-image {
    padding: 16px 16px 16px 0;
    background:
     linear-gradient(#ccc 0 0) top right / 75% 16px,
     linear-gradient(#ccc 0 0) right / 16px 100%,
     linear-gradient(#ccc 0 0) bottom right / 15% 16px,   transparent;
    background-repeat: no-repeat;
  }

  .cu-component--rich-text,
  .field-type--datetime,
  .field-type--string,
  .field--field-authors,
  .field--field-blog-tags {
    margin-left: calc((var(--post-max-width) - var(--post-max-width-text))/2);
    margin-right: calc((var(--post-max-width) - var(--post-max-width-text))/2);
  }


  .cu-section__content {
    display: flex;
    flex-direction: column;
    gap: var(--cu-vr1);

    .cu-heading.field--title,
    .cu-heading.field--field-subtitle {
      margin-bottom: 0;
    }

    .cu-heading.field--field-subtitle {
      font-style: italic;
      --cu-font-size: var(--cu-ms2);
    }

    .social-sharing-buttons {
      margin: 0;
    }
  }

  .persona__name {
    margin-bottom: 0;
  }
}

// Posts in modals
.cu-modal .article--postalicious {
  .cu-section {
    display: block;
    margin: 0;
  }

  .cu-banner--page,
  .field--field-blog-tags {
    display: none;
  }

  .collection > div {
    margin: 0;
  }
}

.collection-listing .field-type--entity-reference {
  display: contents;
}

.node--postalicious.node--view-mode-mini {
  margin-bottom: var(--cu-vr1);
}

.post__info {
  display: flex;
}

.post__info > *:not(:last-child)::after {
  content: '-';
  display: inline-block;
  padding: 0 .5em;
}

.content--evergreen .field--field-published-date {
  display: none;
}

.cu-topic-list__item .cu-card .field--field-published-date {
  margin: 0;
  font-size: 12px;
}

// Cross-post specific styles.
.collection_item .block-system-main-block {
  .field--field-blog-tags {
    width: 100%;
    max-width: var(--post-max-width-text);

    // Move the tags on a collection item display into the section margin. This
    // is required because the collection_item entity display embeds the node
    // view, which places all content into a section, but displays the tags
    // after that rendered node.
    margin: calc(var(--cu-component-margin-bottom, var(--cu-vr3)) * -1) auto var(--cu-vr1);
  }
}
