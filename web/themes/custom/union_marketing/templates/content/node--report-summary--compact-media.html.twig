{#
/**
 * @file
 * Theme override to display a report summary node in Compact with Media view mode.
 *
 * This template displays report summaries in a carousel with hover overlay effect.
 * Shows the title and emphasized title text over the representative image.
 */
#}
{% set emphasized_title = node.field_emphasized_title_text.value %}
{% set title_with_emphasis = label %}

{# If emphasized title text is set, wrap matching portion with <strong> #}
{% if emphasized_title %}
  {% set title_with_emphasis = label|replace({(emphasized_title): '<strong>' ~ emphasized_title ~ '</strong>'})|raw %}
{% endif %}

{% set rendered_content %}
  {{ title_suffix }}
  <h3 class="cu-composite-heading__heading">{{ title_with_emphasis }}</h3>
  {{ content.field_published_date }}
{% endset %}

{% set media_content %}
  {{ content.field_representative_image }}
{% endset %}

{% include '@union/_card.twig' with {
  card_content: rendered_content,
  card_media: media_content,
  card_link_url: url,
  card_link_alt: label,
  link_attributes: url_attributes,
  content_attributes: { class: 'cu-card__content--hover-overlay' },
  attributes: attributes.addClass([
    'cu-card--hover-overlay',
    'node--' ~ node.bundle|clean_class,
    not node.isPublished() ? 'node--unpublished',
    view_mode ? 'node--view-mode-' ~ view_mode|clean_class,
  ])
} only %}
